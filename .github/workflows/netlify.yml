---
  name: Netlify Deployment
  
  on:
    push:
      branches:
        - main
  
  jobs:
    build:
      runs-on: ubuntu-latest
  
      env:  # Add this section to set environment variables for all steps
        NODE_ENV: 'production'
        NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_TOKEN }}
  
      steps:
        - name: Checkout code
          uses: actions/checkout@v2

        - name: Install dotenv-webpack
          run: npm install dotenv-webpack  # Manual installation
  
        - name: Install dependencies
          run: npm install
  
        - name: Build project
          run: npm run build
  
        - name: Deploy to Netlify
          uses: nwtgck/actions-netlify@v1
          with:
            publish-dir: ./dist
            production-branch: main
            github-token: ${{ secrets.GITHUB_TOKEN }}
  